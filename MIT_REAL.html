<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gerador MIT (Real) [BRUTALISM]</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg-body: #06b6d4; /* Ciano */
        --card-bg: #ffffff;
        --border-black: #000000;

        --color-primary: #8b5cf6; /* Roxo */
        --color-secondary: #f472b6; /* Rosa */
        --color-accent: #facc15; /* Amarelo */
        --color-success: #22c55e; /* Verde */
        --color-danger: #ef4444; /* Vermelho */

        --shadow-dist: 6px;
        --border-width: 3px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Space Grotesk", sans-serif;
        background-color: var(--bg-body);
        background-image: linear-gradient(#fff 2px, transparent 2px),
          linear-gradient(90deg, #fff 2px, transparent 2px);
        background-size: 40px 40px;
        color: var(--border-black);
        height: 100vh;
        display: flex;
        overflow: hidden;
      }

      /* Sidebar */
      .sidebar {
        width: 280px;
        background: var(--color-accent);
        border-right: var(--border-width) solid var(--border-black);
        display: flex;
        flex-direction: column;
        padding: 2rem 1.5rem;
        flex-shrink: 0;
        box-shadow: 4px 0 0 rgba(0, 0, 0, 0.1);
        overflow-y: auto;
      }

      .logo {
        font-weight: 900;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 3rem;
        text-decoration: none;
        color: var(--border-black);
        text-transform: uppercase;
      }

      .logo i {
        background: var(--color-danger);
        color: #fff;
        padding: 10px;
        border: var(--border-width) solid var(--border-black);
        box-shadow: 4px 4px 0 0 black;
      }

      .nav-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 15px;
        margin-bottom: 1rem;
        font-weight: 800;
        color: #000;
        text-decoration: none;
        border: var(--border-width) solid var(--border-black);
        background: #fff;
        box-shadow: 4px 4px 0 0 black;
        text-transform: uppercase;
        font-size: 0.9rem;
      }

      .nav-item.active {
        background-color: var(--color-primary);
        color: #fff;
        transform: translate(-2px, -2px);
        box-shadow: 6px 6px 0 0 black;
      }

      .main-content {
        flex: 1;
        padding: 2rem;
        overflow-y: auto;
      }

      /* Neo Header */
      .neo-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2.5rem;
        background: #fff;
        border: var(--border-width) solid var(--border-black);
        padding: 2rem;
        box-shadow: var(--shadow-dist) var(--shadow-dist) 0 #000;
      }
      .header-title h1 {
        font-weight: 900;
        font-size: 2.2rem;
        text-transform: uppercase;
      }
      .header-title span {
        font-family: "Space Mono", monospace;
        background: var(--color-secondary);
        color: #fff;
        padding: 5px 10px;
        border: 2px solid #000;
        font-weight: 700;
      }

      /* Info Box */
      .info-box {
        background: #fff;
        border: var(--border-width) solid black;
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-dist) var(--shadow-dist) 0 var(--color-primary);
      }
      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
      }
      .info-item strong {
        display: block;
        font-size: 0.75rem;
        text-transform: uppercase;
        color: #666;
      }

      /* Cards */
      .neo-card {
        background: #fff;
        border: var(--border-width) solid var(--border-black);
        padding: 2rem;
        box-shadow: var(--shadow-dist) var(--shadow-dist) 0 #000;
        margin-bottom: 2rem;
      }
      .card-title {
        font-weight: 900;
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
        text-transform: uppercase;
        border-bottom: 3px solid #000;
        padding-bottom: 10px;
      }

      .border-top-purple {
        border-top: 8px solid var(--color-primary);
      }
      .border-top-pink {
        border-top: 8px solid var(--color-secondary);
      }
      .border-top-green {
        border-top: 8px solid var(--color-success);
      }

      /* Forms */
      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
      }
      label {
        font-weight: 800;
        display: block;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        font-family: "Space Mono", monospace;
        font-size: 0.85rem;
      }
      .neo-input {
        width: 100%;
        padding: 12px;
        font-size: 1rem;
        font-family: "Space Mono", monospace;
        font-weight: bold;
        border: var(--border-width) solid var(--border-black);
        background: #f3f4f6;
        outline: none;
      }
      .neo-input:focus {
        background: #fff;
        transform: translate(-2px, -2px);
        box-shadow: 5px 5px 0 0 var(--color-primary);
      }

      small {
        display: block;
        margin-top: 5px;
        font-weight: 700;
        color: #444;
        font-size: 0.75rem;
      }

      /* Buttons */
      .neo-btn {
        padding: 1rem 2rem;
        font-weight: 900;
        border: var(--border-width) solid var(--border-black);
        cursor: pointer;
        box-shadow: 5px 5px 0 0 black;
        text-transform: uppercase;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: 0.1s;
      }
      .neo-btn:active {
        transform: translate(4px, 4px);
        box-shadow: 0 0 0 0 black;
      }

      .btn-generate {
        background: var(--color-primary);
        color: #fff;
        width: 100%;
        font-size: 1.2rem;
      }
      .btn-save {
        background: var(--color-success);
        color: #000;
        margin-top: 1rem;
        width: 100%;
      }
      .btn-copy {
        background: #000;
        color: #fff;
        margin-top: 1rem;
        display: none;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(139, 92, 246, 0.8);
        backdrop-filter: blur(4px);
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background: #fff;
        padding: 2.5rem;
        border: 4px solid black;
        max-width: 500px;
        text-align: center;
        box-shadow: 12px 12px 0 0 black;
      }

      #resultado {
        background: #000;
        color: #00ff00;
        padding: 1.5rem;
        font-family: "Space Mono", monospace;
        border: var(--border-width) solid #000;
        margin-top: 1.5rem;
        display: none;
        max-height: 400px;
        overflow-y: auto;
        white-space: pre-wrap;
      }

      @media (max-width: 768px) {
        body {
          flex-direction: column;
        }
        .sidebar {
          width: 100%;
          flex-direction: row;
          border-right: none;
          border-bottom: 3px solid black;
        }
        .main-content {
          padding: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <aside class="sidebar">
      <a href="index.html" class="logo">
        <i class="fas fa-file-invoice"></i>
        <span>MIT Real</span>
      </a>
      <nav>
        <a href="#" class="nav-item active">
          <i class="fas fa-cog"></i> Gerador JSON
        </a>
        <a href="index.html" class="nav-item">
          <i class="fas fa-arrow-left"></i> Voltar
        </a>
      </nav>
    </aside>

    <main class="main-content">
      <div class="neo-header">
        <div class="header-title">
          <h1>M√≥dulo de Integra√ß√£o üìÑ</h1>
          <span>LUCRO REAL - VERS√ÉO 1.2</span>
        </div>
      </div>

      <div id="infoArmazenada" class="info-box" style="display: none">
        <h2
          style="
            font-weight: 900;
            text-transform: uppercase;
            margin-bottom: 1rem;
          "
        >
          <i class="fas fa-user-check"></i> Respons√°vel Salvo
        </h2>
        <div class="info-grid">
          <div class="info-item">
            <strong>CPF</strong> <span id="cpfSalvo"></span>
          </div>
          <div class="info-item">
            <strong>Telefone</strong> (<span id="dddSalvo"></span>)
            <span id="telefoneSalvo"></span>
          </div>
          <div class="info-item">
            <strong>CRC</strong> <span id="crcSalvo"></span> /
            <span id="ufSalvo"></span>
          </div>
        </div>
      </div>

      <form id="formJson">
        <div class="neo-card border-top-purple">
          <div class="card-title">
            <i class="fas fa-id-card"></i> Identifica√ß√£o
          </div>
          <div class="form-group">
            <label>CNPJ Raiz (8 d√≠gitos)</label>
            <input
              type="text"
              id="cnpjRaiz"
              class="neo-input"
              maxlength="8"
              pattern="[0-9]{8}"
              required
              placeholder="12345678"
            />
            <small>Apenas n√∫meros, sem pontua√ß√£o.</small>
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label>M√™s de Apura√ß√£o</label>
              <input
                type="number"
                id="mesApuracao"
                class="neo-input"
                min="1"
                max="12"
                required
              />
            </div>
            <div class="form-group">
              <label>Ano de Apura√ß√£o</label>
              <input
                type="number"
                id="anoApuracao"
                class="neo-input"
                min="2000"
                max="2100"
                required
              />
            </div>
          </div>
        </div>

        <div class="neo-card border-top-green">
          <div class="card-title">
            <i class="fas fa-user-tie"></i> Respons√°vel T√©cnico
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label>CPF</label>
              <input
                type="text"
                id="cpfResponsavel"
                class="neo-input"
                maxlength="11"
              />
            </div>
            <div class="form-group">
              <label>Telefone</label>
              <div style="display: flex; gap: 5px">
                <input
                  type="text"
                  id="dddResponsavel"
                  class="neo-input"
                  style="width: 70px"
                  maxlength="2"
                  placeholder="DDD"
                />
                <input
                  type="text"
                  id="numTelefone"
                  class="neo-input"
                  maxlength="9"
                  placeholder="N√∫mero"
                />
              </div>
            </div>
            <div class="form-group">
              <label>E-mail</label>
              <input type="email" id="emailResponsavel" class="neo-input" />
            </div>
            <div class="form-group">
              <label>UF Registro</label>
              <select id="estadoUF" class="neo-input">
                <option value="">Selecione</option>
                <option value="AC">AC</option>
                <option value="AL">AL</option>
                <option value="AP">AP</option>
                <option value="AM">AM</option>
                <option value="BA">BA</option>
                <option value="CE">CE</option>
                <option value="DF">DF</option>
                <option value="ES">ES</option>
                <option value="GO">GO</option>
                <option value="MA">MA</option>
                <option value="MT">MT</option>
                <option value="MS">MS</option>
                <option value="MG">MG</option>
                <option value="PA">PA</option>
                <option value="PB">PB</option>
                <option value="PR">PR</option>
                <option value="PE">PE</option>
                <option value="PI">PI</option>
                <option value="RJ">RJ</option>
                <option value="RN">RN</option>
                <option value="RS">RS</option>
                <option value="RO">RO</option>
                <option value="RR">RR</option>
                <option value="SC">SC</option>
                <option value="SP">SP</option>
                <option value="SE">SE</option>
                <option value="TO">TO</option>
              </select>
            </div>
            <div class="form-group">
              <label>Registro CRC</label>
              <input
                type="text"
                id="numRegistroCRC"
                class="neo-input"
                placeholder="Ex: MG000000"
              />
            </div>
          </div>
          <button type="button" id="salvarDados" class="neo-btn btn-save">
            <i class="fas fa-save"></i> SALVAR RESPONS√ÅVEL
          </button>
        </div>

        <div class="neo-card border-top-pink">
          <div class="card-title">
            <i class="fas fa-coins"></i> D√©bitos Mensais e Trimestrais
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label>PIS (6912)</label>
              <input
                type="number"
                id="valorDebitoPisPasep"
                class="neo-input"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label>COFINS (5856)</label>
              <input
                type="number"
                id="valorDebitoCofins"
                class="neo-input"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label>IRPJ (3373)</label>
              <input
                type="number"
                id="valorDebitoIrpj"
                class="neo-input"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label>CSLL (6012)</label>
              <input
                type="number"
                id="valorDebitoCsll"
                class="neo-input"
                step="0.01"
              />
            </div>
          </div>
        </div>

        <button type="button" id="gerarJson" class="neo-btn btn-generate">
          <i class="fas fa-code"></i> GERAR E BAIXAR JSON
        </button>
      </form>

      <div id="resultado"></div>
      <button type="button" id="copiarJson" class="neo-btn btn-copy">
        <i class="fas fa-copy"></i> COPIAR JSON
      </button>
    </main>

    <div id="alertModal" class="modal">
      <div class="modal-content">
        <h2
          style="
            font-weight: 900;
            color: var(--color-danger);
            margin-bottom: 1rem;
          "
        >
          ATEN√á√ÉO!
        </h2>
        <p style="font-weight: 700; margin-bottom: 1rem">
          √â fundamental a confer√™ncia dos dados ap√≥s a importa√ß√£o no E-CAC.
        </p>
        <p>
          O arquivo JSON foi gerado com sucesso e o download iniciar√°
          automaticamente.
        </p>
        <button
          id="confirmarModal"
          class="neo-btn"
          style="background: #000; color: #fff; width: 100%; margin-top: 1.5rem"
        >
          ENTENDIDO
        </button>
      </div>
    </div>

    <script>
      const STORAGE_KEY = "mitResponsavelData";

      document.addEventListener("DOMContentLoaded", carregarDadosSalvos);

      function carregarDadosSalvos() {
        const dadosSalvos = localStorage.getItem(STORAGE_KEY);
        if (dadosSalvos) {
          const d = JSON.parse(dadosSalvos);
          document.getElementById("cpfResponsavel").value = d.cpf || "";
          document.getElementById("dddResponsavel").value = d.ddd || "";
          document.getElementById("numTelefone").value = d.telefone || "";
          document.getElementById("emailResponsavel").value = d.email || "";
          document.getElementById("estadoUF").value = d.uf || "";
          document.getElementById("numRegistroCRC").value = d.registroCrc || "";

          document.getElementById("cpfSalvo").textContent = d.cpf;
          document.getElementById("dddSalvo").textContent = d.ddd;
          document.getElementById("telefoneSalvo").textContent = d.telefone;
          document.getElementById("crcSalvo").textContent = d.registroCrc;
          document.getElementById("ufSalvo").textContent = d.uf;
          document.getElementById("infoArmazenada").style.display = "block";
        }
      }

      document.getElementById("salvarDados").addEventListener("click", () => {
        const d = {
          cpf: document.getElementById("cpfResponsavel").value,
          ddd: document.getElementById("dddResponsavel").value,
          telefone: document.getElementById("numTelefone").value,
          email: document.getElementById("emailResponsavel").value,
          uf: document.getElementById("estadoUF").value,
          registroCrc: document.getElementById("numRegistroCRC").value,
        };
        if (!d.cpf || !d.ddd || !d.telefone)
          return alert("Preencha os dados do respons√°vel.");
        localStorage.setItem(STORAGE_KEY, JSON.stringify(d));
        carregarDadosSalvos();
        alert("Dados salvos!");
      });

      document.getElementById("gerarJson").addEventListener("click", () => {
        const cnpjRaiz = document.getElementById("cnpjRaiz").value;
        const mes = parseInt(document.getElementById("mesApuracao").value);
        const ano = parseInt(document.getElementById("anoApuracao").value);

        if (cnpjRaiz.length !== 8 || !mes || !ano)
          return alert("Verifique CNPJ e Per√≠odo.");

        const jsonObj = {
          PeriodoApuracao: { MesApuracao: mes, AnoApuracao: ano },
          DadosIniciais: {
            SemMovimento: false,
            QualificacaoPj: 1,
            TributacaoLucro: 2,
            VariacoesMonetarias: 1,
            RegimePiscofins: 1,
            ResponsavelApuracao: {
              CpfResponsavel: document.getElementById("cpfResponsavel").value,
              TelResponsavel: {
                Ddd: document.getElementById("dddResponsavel").value,
                NumTelefone: document.getElementById("numTelefone").value,
              },
              EmailResponsavel:
                document.getElementById("emailResponsavel").value,
              RegistroCrc: {
                UfRegistro: document.getElementById("estadoUF").value,
                NumRegistro: document.getElementById("numRegistroCRC").value,
              },
            },
          },
          Debitos: {},
        };

        let id = 1;
        const addDebito = (campo, cod, objKey) => {
          const val = parseFloat(document.getElementById(campo).value || 0);
          if (val > 0)
            jsonObj.Debitos[objKey] = {
              ListaDebitos: [
                { IdDebito: id++, CodigoDebito: cod, ValorDebito: val },
              ],
            };
        };

        addDebito("valorDebitoIrpj", "337301", "Irpj");
        addDebito("valorDebitoCsll", "601201", "Csll");
        addDebito("valorDebitoPisPasep", "691201", "PisPasep");
        addDebito("valorDebitoCofins", "585601", "Cofins");

        const jsonStr = JSON.stringify(jsonObj, null, 2);
        const resDiv = document.getElementById("resultado");
        resDiv.textContent = jsonStr;
        resDiv.style.display = "block";
        document.getElementById("copiarJson").style.display = "flex";

        downloadJson(jsonObj, cnpjRaiz, ano, mes);
        document.getElementById("alertModal").style.display = "flex";
      });

      function downloadJson(data, cnpj, ano, mes) {
        const blob = new Blob([JSON.stringify(data, null, 2)], {
          type: "application/json",
        });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = `${cnpj}-MIT-${ano}${String(mes).padStart(2, "0")}.json`;
        a.click();
      }

      document.getElementById("copiarJson").addEventListener("click", () => {
        navigator.clipboard.writeText(
          document.getElementById("resultado").textContent
        );
        alert("Copiado!");
      });

      document.getElementById("confirmarModal").onclick = () =>
        (document.getElementById("alertModal").style.display = "none");
    </script>
  </body>
</html>
