<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestor de Contratos [Enterprise]</title>

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg-body: #ffde00;
        --card-bg: #ffffff;
        --border-black: #000000;
        --c-purple: #8b5cf6;
        --c-pink: #ff90e8;
        --c-blue: #06b6d4;
        --c-green: #22c55e;
        --c-red: #ff4d4d;
        --c-orange: #f97316;
        --c-gray: #f3f4f6;
        --border-width: 3px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Space Grotesk", sans-serif;
        background-color: var(--bg-body);
        background-image: radial-gradient(#000 1px, transparent 1px);
        background-size: 20px 20px;
        color: var(--border-black);
        height: 100vh;
        overflow: hidden;
        display: flex;
      }

      /* SIDEBAR */
      .sidebar {
        width: 240px;
        background: var(--c-purple);
        border-right: var(--border-width) solid var(--border-black);
        padding: 1.5rem 1rem;
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
        color: #fff;
        overflow-y: auto;
      }

      .logo {
        font-size: 1.4rem;
        font-weight: 900;
        text-transform: uppercase;
        margin-bottom: 2rem;
        text-shadow: 3px 3px 0 #000;
        display: flex;
        align-items: center;
        gap: 10px;
        line-height: 1.2;
      }

      .nav-item {
        background: #fff;
        color: #000;
        padding: 0.8rem;
        margin-bottom: 0.8rem;
        font-weight: 800;
        text-transform: uppercase;
        border: var(--border-width) solid #000;
        box-shadow: 3px 3px 0 0 #000;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: 0.2s;
        font-size: 0.85rem;
      }

      .nav-item:hover {
        transform: translate(-2px, -2px);
        box-shadow: 5px 5px 0 0 #000;
        background: var(--c-blue);
      }

      .nav-item.print-btn {
        background: var(--border-black);
        color: #fff;
      }
      .nav-item.print-btn:hover {
        background: #333;
      }

      /* MAIN CONTENT */
      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        height: 100vh;
        overflow: hidden;
      }

      .scroll-content {
        flex: 1;
        overflow-y: auto;
        padding: 1.5rem;
        padding-bottom: 80px;
      }

      /* HEADER */
      .neo-header {
        background: #fff;
        border: var(--border-width) solid #000;
        padding: 1rem 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: 5px 5px 0 0 #000;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .neo-header h1 {
        font-weight: 900;
        font-size: 1.8rem;
        text-transform: uppercase;
        letter-spacing: -1px;
      }
      .badge {
        background: var(--c-pink);
        font-family: "Space Mono", monospace;
        padding: 3px 8px;
        border: 2px solid #000;
        font-size: 0.8rem;
        font-weight: bold;
      }

      /* METRIC CARDS */
      .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
      }
      .metric-card {
        background: #fff;
        border: var(--border-width) solid #000;
        padding: 1rem;
        box-shadow: 4px 4px 0 0 #000;
        position: relative;
      }
      .metric-card.blue {
        border-top: 6px solid var(--c-blue);
      }
      .metric-card.green {
        border-top: 6px solid var(--c-green);
      }
      .metric-card.orange {
        border-top: 6px solid var(--c-orange);
      }

      .metric-title {
        font-weight: 900;
        text-transform: uppercase;
        font-size: 0.75rem;
        margin-bottom: 0.3rem;
        color: #555;
      }
      .metric-value {
        font-family: "Space Mono", monospace;
        font-size: 1.4rem;
        font-weight: 700;
      }

      /* SEARCH BAR */
      .search-container {
        margin-bottom: 1.5rem;
        position: relative;
      }
      .search-input {
        width: 100%;
        padding: 15px 20px;
        padding-left: 50px;
        border: 3px solid #000;
        font-family: "Space Mono";
        font-size: 1rem;
        font-weight: bold;
        text-transform: uppercase;
        background: #fff;
        box-shadow: 4px 4px 0 0 #000;
        outline: none;
        transition: 0.2s;
      }
      .search-input::placeholder {
        color: #aaa;
      }
      .search-input:focus {
        box-shadow: 6px 6px 0 0 var(--c-purple);
        transform: translate(-1px, -1px);
      }
      .search-icon {
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        color: #000;
        font-size: 1.2rem;
        pointer-events: none;
      }

      /* UPLOAD */
      .upload-area {
        background: var(--c-pink);
        border: 3px dashed #000;
        padding: 2rem;
        text-align: center;
        margin-bottom: 2rem;
        cursor: pointer;
        transition: 0.2s;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      .upload-area:hover {
        background: #ffbdf2;
        transform: scale(1.005);
      }
      #jsonInput {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
      }

      /* CONTRACT CARDS (GRID DETALHADO) */
      .contracts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
        gap: 1.5rem;
      }

      .contract-card {
        background: #fff;
        border: var(--border-width) solid #000;
        box-shadow: 5px 5px 0 0 #000;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        transition: 0.2s;
        height: auto;
      }
      .contract-card:hover {
        transform: translateY(-3px);
        box-shadow: 8px 8px 0 0 #000;
      }

      .cc-header {
        background: #000;
        color: #fff;
        padding: 10px 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2px solid #000;
      }
      .cc-bank {
        font-weight: 800;
        text-transform: uppercase;
        font-size: 0.85rem;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .cc-contract-num {
        font-family: "Space Mono";
        font-size: 0.75rem;
        background: #333;
        padding: 2px 6px;
        border-radius: 4px;
      }

      .cc-body {
        padding: 15px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        font-size: 0.85rem;
      }

      .cc-row-full {
        grid-column: 1 / -1;
      }

      .cc-label {
        display: block;
        font-size: 0.65rem;
        text-transform: uppercase;
        font-weight: 800;
        color: #666;
        margin-bottom: 2px;
        font-family: "Space Mono";
      }
      .cc-value {
        font-weight: 700;
        word-break: break-word;
      }
      .cc-money {
        font-family: "Space Mono";
        color: var(--c-blue); /* Destaque visual */
        font-size: 1rem;
      }
      .cc-highlight {
        background: var(--c-gray);
        padding: 8px;
        border: 1px solid #000;
      }

      /* SEÇÃO DE EMPREGADOR (Estilo interno) */
      .employer-section {
        background: #fdfce5;
        border: 1px dashed #000;
        padding: 8px;
        grid-column: 1 / -1;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 5px;
        margin-bottom: 5px;
      }

      /* --- ESTILO DE IMPRESSÃO --- */
      @media print {
        @page {
          size: A4;
          margin: 5mm;
        }

        html,
        body {
          background: #fff;
          height: auto;
          width: auto;
          margin: 0 !important;
          padding: 0 !important;
          overflow: visible;
          display: block !important;
        }

        .sidebar,
        .main-content,
        #lgpdModal,
        .neo-header,
        .dashboard-grid,
        .upload-area,
        .contracts-grid,
        .search-container {
          display: none !important;
        }

        #printArea {
          display: block !important;
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          margin: 0;
          padding: 0;
          color: #000;
          font-family: Arial, sans-serif;
        }

        .report-header {
          border-bottom: 2px solid #000;
          margin-bottom: 15px;
          padding-bottom: 10px;
        }
        .report-title {
          font-size: 16px;
          font-weight: bold;
          text-transform: uppercase;
        }
        .report-meta {
          display: flex;
          justify-content: space-between;
          font-size: 10px;
          margin-top: 5px;
        }

        .report-summary {
          border: 1px solid #000;
          padding: 10px;
          margin-bottom: 15px;
          display: flex;
          justify-content: space-between;
          background: #f0f0f0 !important;
          -webkit-print-color-adjust: exact;
        }
        .sum-item {
          display: flex;
          flex-direction: column;
        }
        .sum-label {
          font-size: 9px;
          text-transform: uppercase;
          font-weight: bold;
        }
        .sum-val {
          font-size: 14px;
          font-family: monospace;
          font-weight: bold;
        }

        .p-contract {
          border: 1px solid #ccc;
          margin-bottom: 10px;
          break-inside: avoid;
          page-break-inside: avoid;
        }
        .p-header {
          background: #eee !important;
          padding: 4px 8px;
          border-bottom: 1px solid #ccc;
          font-weight: bold;
          font-size: 10px;
          display: flex;
          justify-content: space-between;
          -webkit-print-color-adjust: exact;
        }

        .p-body {
          padding: 6px 8px;
          display: grid;
          grid-template-columns: repeat(6, 1fr);
          gap: 6px;
          font-size: 9px;
        }
        .p-item {
          display: flex;
          flex-direction: column;
        }
        .p-lbl {
          color: #666;
          font-size: 7px;
          font-weight: bold;
          text-transform: uppercase;
        }
        .p-val {
          color: #000;
        }

        .span-2 {
          grid-column: span 2;
        }
        .span-3 {
          grid-column: span 3;
        }
        .span-6 {
          grid-column: span 6;
        }

        .p-group {
          grid-column: span 6;
          border-top: 1px dashed #ccc;
          margin-top: 2px;
          padding-top: 2px;
          display: grid;
          grid-template-columns: repeat(6, 1fr);
          gap: 6px;
          background: #fafafa;
        }
      }

      #printArea {
        display: none;
      }
    </style>
  </head>
  <body>
    <div
      id="lgpdModal"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        style="
          background: #fff;
          padding: 2rem;
          border: 4px solid #000;
          box-shadow: 10px 10px 0 #8b5cf6;
          max-width: 450px;
        "
      >
        <h2
          style="
            text-transform: uppercase;
            margin-bottom: 1rem;
            font-weight: 900;
          "
        >
          Dados Completos
        </h2>
        <p style="margin-bottom: 1rem">
          O sistema carregará 100% dos campos do arquivo JSON.
        </p>
        <button
          onclick="document.getElementById('lgpdModal').style.display = 'none'"
          style="
            background: #22c55e;
            color: #000;
            border: 3px solid #000;
            padding: 15px;
            width: 100%;
            font-weight: 900;
            cursor: pointer;
            text-transform: uppercase;
          "
        >
          Iniciar
        </button>
      </div>
    </div>

    <aside class="sidebar">
      <div class="logo">
        <i
          class="fas fa-file-invoice-dollar"
          style="font-size: 1.8rem; color: #fff"
        ></i>
        <div style="margin-left: 10px">
          <div>GESTOR</div>
          <div
            style="
              font-size: 0.6rem;
              font-family: &quot;Space Mono&quot;;
              opacity: 0.8;
            "
          >
            FULL DATA
          </div>
        </div>
      </div>
      <nav>
        <div class="nav-item"><i class="fas fa-home"></i> Dashboard</div>
        <div class="nav-item print-btn" onclick="window.print()">
          <i class="fas fa-print"></i> Imprimir PDF
        </div>
        <div
          class="nav-item"
          onclick="limparTela()"
          style="margin-top: auto; background: #ff4d4d; color: #fff"
        >
          <i class="fas fa-trash"></i> Limpar Tudo
        </div>
      </nav>

      <div
        style="
          margin-top: 2rem;
          padding: 10px;
          border: 2px solid rgba(255, 255, 255, 0.3);
          font-size: 0.7rem;
          font-family: &quot;Space Mono&quot;;
          color: rgba(255, 255, 255, 0.8);
        "
      >
        MODO: DADOS COMPLETOS
      </div>
    </aside>

    <main class="main-content">
      <div class="scroll-content">
        <header class="neo-header">
          <div>
            <h1>Painel de Empréstimos</h1>
            <span class="badge">Detalhado</span>
          </div>
          <div
            style="
              text-align: right;
              font-family: &quot;Space Mono&quot;;
              font-size: 0.8rem;
            "
          >
            COMPETÊNCIA:
            <span
              id="displayCompetencia"
              style="font-weight: bold; color: var(--c-blue)"
              >--/----</span
            >
          </div>
        </header>

        <div class="dashboard-grid">
          <div class="metric-card blue">
            <div class="metric-title">Contratos Filtro</div>
            <div class="metric-value" id="dashQtd">0</div>
          </div>
          <div class="metric-card green">
            <div class="metric-title">Total Filtro (R$)</div>
            <div class="metric-value" id="dashTotal">0,00</div>
          </div>
          <div class="metric-card orange">
            <div class="metric-title">Parcela Média (R$)</div>
            <div class="metric-value" id="dashMedia">0,00</div>
          </div>
        </div>

        <div class="search-container" id="searchArea" style="display: none">
          <i class="fas fa-search search-icon"></i>
          <input
            type="text"
            id="searchInput"
            class="search-input"
            placeholder="DIGITE O NOME DO FUNCIONÁRIO PARA FILTRAR..."
            onkeyup="handleSearch()"
          />
        </div>

        <div class="upload-area" id="dropZone">
          <input
            type="file"
            id="jsonInput"
            accept=".json"
            onchange="handleFile(this)"
          />
          <i
            class="fas fa-cloud-upload-alt fa-3x"
            style="margin-bottom: 15px"
          ></i>
          <div
            style="
              font-weight: 900;
              text-transform: uppercase;
              font-size: 1.2rem;
            "
          >
            Carregar Arquivo JSON
          </div>
          <div
            style="
              font-family: &quot;Space Mono&quot;;
              font-size: 0.8rem;
              margin-top: 5px;
            "
          >
            Mapeamento Completo de Campos
          </div>
        </div>

        <div class="contracts-grid" id="screenContainer"></div>
      </div>
    </main>

    <div id="printArea">
      <div class="report-header">
        <div class="report-title">Relatório Analítico Completo (Full Data)</div>
        <div class="report-meta">
          <span>EMPRESA: USILIDER USINAGEM DE METAIS LTDA</span>
          <span>CNPJ: 05.159.982/0001-82</span>
          <span>COMPETÊNCIA: <span id="printCompetencia">--/----</span></span>
        </div>
      </div>

      <div class="report-summary">
        <div class="sum-item">
          <span class="sum-label">Contratos</span>
          <span class="sum-val" id="printQtd">0</span>
        </div>
        <div class="sum-item">
          <span class="sum-label">Vlr. Total Empréstimo</span>
          <span class="sum-val" id="printTotal">R$ 0,00</span>
        </div>
        <div class="sum-item">
          <span class="sum-label">Vlr. Total Liberado</span>
          <span class="sum-val" id="printLiberado">R$ 0,00</span>
        </div>
      </div>

      <div id="printContainer"></div>
    </div>

    <script>
      let globalData = [];
      const now = new Date();
      // Data de hoje apenas como fallback visual ou log
      console.log("Sistema iniciado em: " + now.toLocaleDateString("pt-BR"));

      function formatMoney(value) {
        if (!value && value !== 0) return "R$ 0,00";
        return parseFloat(value).toLocaleString("pt-BR", {
          style: "currency",
          currency: "BRL",
        });
      }

      function handleFile(input) {
        const file = input.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function (e) {
          try {
            const data = JSON.parse(e.target.result);
            globalData = data;
            document.getElementById("dropZone").style.display = "none";
            document.getElementById("searchArea").style.display = "block";

            // Tenta pegar a competência do primeiro registro para exibir no cabeçalho
            let compGlobal = "--/----";
            if (data.length > 0 && data[0].competencia) {
              compGlobal = data[0].competencia;
            }

            // Atualiza os cabeçalhos fixos (Tela e PDF)
            document.getElementById("displayCompetencia").innerText =
              compGlobal;
            document.getElementById("printCompetencia").innerText = compGlobal;

            processFilteredData(globalData);
          } catch (err) {
            alert("Erro ao ler JSON.");
          }
        };
        reader.readAsText(file);
      }

      function handleSearch() {
        const term = document.getElementById("searchInput").value.toLowerCase();
        const filtered = globalData.filter((item) => {
          const nome = item.nomeTrabalhador
            ? item.nomeTrabalhador.toLowerCase()
            : "";
          return nome.includes(term);
        });
        processFilteredData(filtered);
      }

      function processFilteredData(data) {
        const totalContratos = data.length;
        const totalValor = data.reduce(
          (acc, item) => acc + (item.valorEmprestimo || 0),
          0,
        );
        const totalLiberado = data.reduce(
          (acc, item) => acc + (item.valorLiberado || 0),
          0,
        );
        const totalParcela = data.reduce(
          (acc, item) => acc + (item.valorParcela || 0),
          0,
        );
        const mediaParcela =
          totalContratos > 0 ? totalParcela / totalContratos : 0;

        document.getElementById("dashQtd").innerText = totalContratos;
        document.getElementById("dashTotal").innerText =
          formatMoney(totalValor);
        document.getElementById("dashMedia").innerText =
          formatMoney(mediaParcela);

        document.getElementById("printQtd").innerText = totalContratos;
        document.getElementById("printTotal").innerText =
          formatMoney(totalValor);
        document.getElementById("printLiberado").innerText =
          formatMoney(totalLiberado);

        renderScreen(data);
        renderPrint(data);
      }

      function renderScreen(data) {
        const container = document.getElementById("screenContainer");
        container.innerHTML = "";

        if (data.length === 0) {
          container.innerHTML =
            '<div style="grid-column:1/-1; text-align:center;">Nenhum contrato encontrado.</div>';
          return;
        }

        data.forEach((item) => {
          const card = document.createElement("div");
          card.className = "contract-card";

          card.innerHTML = `
                <div class="cc-header">
                    <div class="cc-bank" title="Cód: ${item["ifConcessora.codigo"]}"><i class="fas fa-university"></i> ${item["ifConcessora.descricao"]}</div>
                    <div class="cc-contract-num">#${item.contrato}</div>
                </div>
                <div class="cc-body">
                    <div class="cc-row-full">
                        <span class="cc-label">Trabalhador</span>
                        <div class="cc-value" style="font-size:1rem; border-bottom:2px solid #ffde00; display:inline-block;">
                            ${item.nomeTrabalhador}
                        </div>
                    </div>
                    <div><span class="cc-label">CPF</span><div class="cc-value">${item.cpf}</div></div>
                    <div><span class="cc-label">Matrícula</span><div class="cc-value">${item.matricula}</div></div>
                    <div><span class="cc-label">Admissão</span><div class="cc-value">${item.dataAdmissao}</div></div>
                    <div><span class="cc-label">Categoria (${item["categoriaTrabalhador.codigo"]})</span><div class="cc-value" style="font-size:0.7rem">${item["categoriaTrabalhador.descricao"]}</div></div>

                    <div class="employer-section">
                        <div class="cc-row-full"><span class="cc-label">Empregador</span><div class="cc-value" style="font-size:0.8rem">${item.nomeEmpregador}</div></div>
                        <div><span class="cc-label">Inscr. Empregador (${item["inscricaoEmpregador.descricao"]})</span><div class="cc-value">${item.numeroInscricaoEmpregador}</div></div>
                        <div><span class="cc-label">Inscr. Estabelec. (${item["inscricaoEstabelecimento.descricao"]})</span><div class="cc-value">${item.numeroInscricaoEstabelecimento}</div></div>
                        <div><span class="cc-label">Cód. Estab</span><div class="cc-value">${item["inscricaoEstabelecimento.codigo"]}</div></div>
                        <div><span class="cc-label">Cód. Emp</span><div class="cc-value">${item["inscricaoEmpregador.codigo"]}</div></div>
                    </div>

                    <div class="cc-highlight"><span class="cc-label">Valor Empréstimo</span><div class="cc-value cc-money">${formatMoney(item.valorEmprestimo)}</div></div>
                    <div class="cc-highlight"><span class="cc-label">Valor Liberado</span><div class="cc-value cc-money">${formatMoney(item.valorLiberado)}</div></div>
                    <div><span class="cc-label">Parcela</span><div class="cc-value" style="color:#ff4d4d; font-weight:bold;">${formatMoney(item.valorParcela)}</div></div>
                    <div><span class="cc-label">Total Parc.</span><div class="cc-value">${item.totalParcelas}x</div></div>

                    <div><span class="cc-label">Qtd. Pagamentos</span><div class="cc-value">${item.qtdPagamentos}</div></div>
                    <div><span class="cc-label">Qtd. Escriturações</span><div class="cc-value">${item.qtdEscrituracoes}</div></div>
                    <div><span class="cc-label">Comp. Contrato</span><div class="cc-value">${item.competencia}</div></div>
                    
                    <div><span class="cc-label">Início Contrato</span><div class="cc-value">${item.dataInicioContrato}</div></div>
                    <div><span class="cc-label">Fim Contrato</span><div class="cc-value">${item.dataFimContrato}</div></div>
                    <div><span class="cc-label">Comp. Início</span><div class="cc-value">${item.competenciaInicioDesconto}</div></div>
                    <div><span class="cc-label">Comp. Fim</span><div class="cc-value">${item.competenciaFimDesconto}</div></div>
                </div>
            `;
          container.appendChild(card);
        });
      }

      function renderPrint(data) {
        const container = document.getElementById("printContainer");
        container.innerHTML = "";

        data.forEach((item) => {
          const div = document.createElement("div");
          div.className = "p-contract";
          div.innerHTML = `
                <div class="p-header">
                    <span>${item["ifConcessora.descricao"]} (Cód: ${item["ifConcessora.codigo"]})</span>
                    <span>CONTRATO: ${item.contrato}</span>
                </div>
                <div class="p-body">
                    <div class="p-item span-2"><span class="p-lbl">Trabalhador</span><span class="p-val" style="font-weight:bold">${item.nomeTrabalhador}</span></div>
                    <div class="p-item"><span class="p-lbl">CPF</span><span class="p-val">${item.cpf}</span></div>
                    <div class="p-item"><span class="p-lbl">Matrícula</span><span class="p-val">${item.matricula}</span></div>
                    <div class="p-item"><span class="p-lbl">Admissão</span><span class="p-val">${item.dataAdmissao}</span></div>
                    <div class="p-item"><span class="p-lbl">Comp. Contrato</span><span class="p-val">${item.competencia}</span></div>

                    <div class="p-item"><span class="p-lbl">Vlr. Empréstimo</span><span class="p-val">${formatMoney(item.valorEmprestimo)}</span></div>
                    <div class="p-item"><span class="p-lbl">Vlr. Liberado</span><span class="p-val">${formatMoney(item.valorLiberado)}</span></div>
                    <div class="p-item"><span class="p-lbl">Parcela</span><span class="p-val">${formatMoney(item.valorParcela)}</span></div>
                    <div class="p-item"><span class="p-lbl">Total Parc.</span><span class="p-val">${item.totalParcelas}</span></div>
                    <div class="p-item"><span class="p-lbl">Qtd. Pag.</span><span class="p-val">${item.qtdPagamentos}</span></div>
                    <div class="p-item"><span class="p-lbl">Qtd. Escr.</span><span class="p-val">${item.qtdEscrituracoes}</span></div>

                    <div class="p-item"><span class="p-lbl">Início Cont.</span><span class="p-val">${item.dataInicioContrato}</span></div>
                    <div class="p-item"><span class="p-lbl">Fim Cont.</span><span class="p-val">${item.dataFimContrato}</span></div>
                    <div class="p-item"><span class="p-lbl">Comp. Início</span><span class="p-val">${item.competenciaInicioDesconto}</span></div>
                    <div class="p-item"><span class="p-lbl">Comp. Fim</span><span class="p-val">${item.competenciaFimDesconto}</span></div>
                    <div class="p-item span-2"><span class="p-lbl">Categoria (${item["categoriaTrabalhador.codigo"]})</span><span class="p-val" style="font-size:7px;">${item["categoriaTrabalhador.descricao"]}</span></div>
                    
                    <div class="p-group">
                        <div class="p-item span-2"><span class="p-lbl">Empregador</span><span class="p-val">${item.nomeEmpregador}</span></div>
                        <div class="p-item"><span class="p-lbl">Inscr. Emp (${item["inscricaoEmpregador.descricao"]})</span><span class="p-val">${item.numeroInscricaoEmpregador}</span></div>
                         <div class="p-item"><span class="p-lbl">Cód Emp</span><span class="p-val">${item["inscricaoEmpregador.codigo"]}</span></div>
                        <div class="p-item"><span class="p-lbl">Inscr. Estab (${item["inscricaoEstabelecimento.descricao"]})</span><span class="p-val">${item.numeroInscricaoEstabelecimento}</span></div>
                        <div class="p-item"><span class="p-lbl">Cód Estab</span><span class="p-val">${item["inscricaoEstabelecimento.codigo"]}</span></div>
                    </div>
                </div>
            `;
          container.appendChild(div);
        });
      }

      function limparTela() {
        globalData = [];
        document.getElementById("screenContainer").innerHTML = "";
        document.getElementById("dashQtd").innerText = "0";
        document.getElementById("dashTotal").innerText = "0,00";
        document.getElementById("dashMedia").innerText = "0,00";
        document.getElementById("displayCompetencia").innerText = "--/----";
        document.getElementById("printCompetencia").innerText = "--/----";

        document.getElementById("dropZone").style.display = "flex";
        document.getElementById("searchArea").style.display = "none";

        document.getElementById("jsonInput").value = "";
        document.getElementById("searchInput").value = "";
      }
    </script>
  </body>
</html>
