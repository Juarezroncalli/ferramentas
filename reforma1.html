<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculadora de Transição Tributária [BRUTALISM]</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg-body: #8b5cf6;
        --card-bg: #ffffff;
        --border-black: #000000;
        --color-primary: #06b6d4;
        --color-secondary: #f472b6;
        --color-accent: #facc15;
        --color-success: #22c55e;
        --shadow-dist: 6px;
        --border-width: 3px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Space Grotesk", sans-serif;
        background-color: var(--bg-body);
        background-image: linear-gradient(#fff 2px, transparent 2px),
          linear-gradient(90deg, #fff 2px, transparent 2px);
        background-size: 40px 40px;
        color: var(--border-black);
        height: 100vh;
        overflow: hidden;
        display: flex;
      }

      .sidebar {
        width: 280px;
        background: var(--color-accent);
        border-right: var(--border-width) solid var(--border-black);
        display: flex;
        flex-direction: column;
        padding: 2rem 1.5rem;
        flex-shrink: 0;
        overflow-y: auto;
      }

      .logo {
        font-weight: 900;
        font-size: 1.4rem;
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 3rem;
        text-decoration: none;
        color: var(--border-black);
        text-transform: uppercase;
      }

      .logo i {
        background: var(--color-secondary);
        color: #fff;
        padding: 10px;
        border: var(--border-width) solid var(--border-black);
        box-shadow: 4px 4px 0 0 black;
      }

      .nav-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 15px;
        margin-bottom: 1rem;
        font-weight: 800;
        color: #000;
        border: var(--border-width) solid var(--border-black);
        background: #fff;
        box-shadow: 4px 4px 0 0 black;
        text-transform: uppercase;
        font-size: 0.85rem;
        text-decoration: none;
      }

      .main-content {
        flex: 1;
        padding: 2rem;
        overflow-y: auto;
      }

      .neo-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2.5rem;
        background: #fff;
        border: var(--border-width) solid var(--border-black);
        padding: 2rem;
        box-shadow: var(--shadow-dist) var(--shadow-dist) 0 #000;
      }
      .header-title h1 {
        font-weight: 900;
        font-size: 2rem;
        text-transform: uppercase;
      }
      .header-title span {
        font-family: "Space Mono", monospace;
        font-size: 0.9rem;
        font-weight: 700;
        background: var(--color-secondary);
        color: #fff;
        padding: 5px 10px;
        border: 2px solid #000;
      }

      .neo-card {
        background: #fff;
        border: var(--border-width) solid var(--border-black);
        padding: 2rem;
        box-shadow: var(--shadow-dist) var(--shadow-dist) 0 #000;
        margin-bottom: 2rem;
      }

      .card-title {
        font-weight: 900;
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
        text-transform: uppercase;
        border-bottom: 3px solid #000;
        padding-bottom: 10px;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1.5rem;
      }

      .form-group label {
        font-weight: 800;
        display: block;
        margin-bottom: 0.5rem;
        font-size: 0.8rem;
        text-transform: uppercase;
        font-family: "Space Mono", monospace;
      }

      .neo-input {
        width: 100%;
        padding: 12px;
        font-family: "Space Mono", monospace;
        font-weight: bold;
        border: var(--border-width) solid var(--border-black);
        background: #f3f4f6;
        outline: none;
      }
      .neo-input:focus {
        background-color: #fff;
        box-shadow: 4px 4px 0 0 var(--color-primary);
        transform: translate(-2px, -2px);
      }

      .neo-btn {
        padding: 1rem 2rem;
        font-weight: 800;
        font-family: "Space Grotesk", sans-serif;
        border: var(--border-width) solid var(--border-black);
        cursor: pointer;
        box-shadow: 5px 5px 0 0 black;
        text-transform: uppercase;
        background-color: var(--color-success);
        width: 100%;
        margin-top: 1rem;
      }
      .neo-btn:active {
        transform: translate(4px, 4px);
        box-shadow: 0 0 0 0 black;
      }

      .results-container {
        margin-top: 2rem;
        overflow-x: auto;
      }
      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        border: var(--border-width) solid #000;
        background: #fff;
        box-shadow: 8px 8px 0 0 #000;
      }
      th {
        background: var(--color-accent);
        padding: 1.2rem;
        border-bottom: var(--border-width) solid #000;
        border-right: 2px solid #000;
        text-transform: uppercase;
        font-weight: 900;
        font-size: 0.8rem;
      }
      td {
        padding: 1rem;
        border-bottom: 2px solid #000;
        border-right: 2px solid #000;
        font-family: "Space Mono", monospace;
        font-weight: 700;
        text-align: center;
      }
      .total-col {
        background-color: #f0e6fa;
        font-weight: 900;
      }

      @media (max-width: 768px) {
        body {
          flex-direction: column;
        }
        .sidebar {
          width: 100%;
          border-right: none;
          border-bottom: 3px solid black;
          flex-direction: row;
          height: auto;
        }
      }
    </style>
  </head>
  <body>
    <aside class="sidebar">
      <a href="#" class="logo">
        <i class="fa-solid fa-scale-balanced"></i>
        <span>Tax Reform</span>
      </a>
      <nav>
        <a href="#" class="nav-item">
          <i class="fas fa-calculator"></i> Transição
        </a>
      </nav>
    </aside>

    <main class="main-content">
      <div class="neo-header">
        <div class="header-title">
          <h1>Calculadora Transição ⚖️</h1>
          <span>Simulação Efetiva (2027-2033)</span>
        </div>
      </div>

      <div class="neo-card">
        <div class="card-title">
          <i class="fas fa-sliders-h"></i> Parâmetros da Reforma
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label>Padrão IBS (%)</label>
            <input
              type="number"
              id="aliquotaIBS"
              class="neo-input"
              placeholder="Ex: 18.50"
              step="0.01"
            />
          </div>
          <div class="form-group">
            <label>Padrão CBS (%)</label>
            <input
              type="number"
              id="aliquotaCBS"
              class="neo-input"
              placeholder="Ex: 8.50"
              step="0.01"
            />
          </div>
          <div class="form-group">
            <label>Atual ISS (%)</label>
            <input
              type="number"
              id="aliquotaISS"
              class="neo-input"
              placeholder="Ex: 5.00"
              step="0.01"
            />
          </div>
          <div class="form-group">
            <label>Atual ICMS (%)</label>
            <input
              type="number"
              id="aliquotaICMS"
              class="neo-input"
              placeholder="Ex: 18.00"
              step="0.01"
            />
          </div>
          <div class="form-group">
            <label>Redução IBS/CBS (%)</label>
            <input
              type="number"
              id="percentualReducao"
              class="neo-input"
              placeholder="Ex: 60"
              step="0.01"
            />
          </div>
        </div>
        <button id="calcularBtn" class="neo-btn">
          <i class="fa-solid fa-bolt"></i> CALCULAR TRANSIÇÃO
        </button>
      </div>

      <div class="results-container">
        <table>
          <thead>
            <tr>
              <th>Ano</th>
              <th>CBS (Novo)</th>
              <th>IBS (Novo)</th>
              <th>ISS (Antigo)</th>
              <th>ICMS (Antigo)</th>
              <th class="total-col">TOTAL (%)</th>
            </tr>
          </thead>
          <tbody id="tabelaResultados"></tbody>
        </table>
      </div>
    </main>

    <script>
      const ANOS_TRANSICAO = [2027, 2028, 2029, 2030, 2031, 2032, 2033];
      const ESCALA_IBS = {
        2029: 0.1,
        2030: 0.2,
        2031: 0.3,
        2032: 0.4,
        2033: 1.0,
      };
      const ESCALA_ANTIGOS = {
        2027: 1.0,
        2028: 1.0,
        2029: 0.9,
        2030: 0.8,
        2031: 0.7,
        2032: 0.6,
        2033: 0.0,
      };

      function formatPercent(value) {
        return value.toFixed(2).replace(".", ",") + "%";
      }

      function calcular() {
        const iIBS = document.getElementById("aliquotaIBS").value;
        const iCBS = document.getElementById("aliquotaCBS").value;
        const iISS = document.getElementById("aliquotaISS").value;
        const iICMS = document.getElementById("aliquotaICMS").value;
        const iRed = document.getElementById("percentualReducao").value;

        if (!iIBS || !iCBS || !iISS || !iICMS || !iRed) {
          alert("Por favor, preencha todas as alíquotas para calcular.");
          return;
        }

        const aliqIBS_Base = parseFloat(iIBS);
        const aliqCBS_Base = parseFloat(iCBS);
        const aliqISS_Base = parseFloat(iISS);
        const aliqICMS_Base = parseFloat(iICMS);
        const percReducao = parseFloat(iRed) / 100;

        const tbody = document.getElementById("tabelaResultados");
        tbody.innerHTML = "";

        const ibsAlvoReduzido = aliqIBS_Base * (1 - percReducao);
        const cbsAlvoReduzido = aliqCBS_Base * (1 - percReducao);

        ANOS_TRANSICAO.forEach((ano) => {
          let valCBS = cbsAlvoReduzido;
          let valIBS =
            ano === 2027 || ano === 2028
              ? 0.05 * (1 - percReducao)
              : ibsAlvoReduzido * (ESCALA_IBS[ano] || 0);

          const fatorAntigos = ESCALA_ANTIGOS[ano];
          let valISS = aliqISS_Base * fatorAntigos;
          let valICMS = aliqICMS_Base * fatorAntigos;
          let total = valCBS + valIBS + valISS + valICMS;

          const tr = document.createElement("tr");
          tr.innerHTML = `
                <td><strong>${ano}</strong></td>
                <td>${formatPercent(valCBS)}</td>
                <td>${formatPercent(valIBS)}</td>
                <td>${formatPercent(valISS)}</td>
                <td>${formatPercent(valICMS)}</td>
                <td class="total-col">${formatPercent(total)}</td>
            `;
          tbody.appendChild(tr);
        });
      }

      document
        .getElementById("calcularBtn")
        .addEventListener("click", calcular);
    </script>
  </body>
</html>
